"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[931],{3207:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"client/configuration","title":"Client Configuration","description":"Configure RpcClient with base URL, API prefix, custom Axios instances, and dynamic configuration updates.","source":"@site/docs/client/configuration.md","sourceDirName":"client","slug":"/client/configuration","permalink":"/NestRPC-docs/docs/client/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs/blob/main/docs/client/configuration.md","tags":[],"version":"current","frontMatter":{"title":"Client Configuration","description":"Configure RpcClient with base URL, API prefix, custom Axios instances, and dynamic configuration updates."},"sidebar":"tutorialSidebar","previous":{"title":"Client Overview","permalink":"/NestRPC-docs/docs/client/overview"},"next":{"title":"File Uploads","permalink":"/NestRPC-docs/docs/client/file-uploads"}}');var r=t(4848),s=t(8453);const o={title:"Client Configuration",description:"Configure RpcClient with base URL, API prefix, custom Axios instances, and dynamic configuration updates."},a="Client Configuration",c={},l=[{value:"\ud83c\udfaf Basic Configuration",id:"-basic-configuration",level:2},{value:"Configuration Options",id:"configuration-options",level:3},{value:"\u2699\ufe0f Advanced Configuration",id:"\ufe0f-advanced-configuration",level:2},{value:"Custom Request Options",id:"custom-request-options",level:3},{value:"Custom Axios Instance",id:"custom-axios-instance",level:3},{value:"Environment-Based Configuration",id:"environment-based-configuration",level:3},{value:"\ud83d\udd04 Dynamic Configuration",id:"-dynamic-configuration",level:2},{value:"Update Single Property",id:"update-single-property",level:3},{value:"Update Entire Config",id:"update-entire-config",level:3},{value:"Read Current Config",id:"read-current-config",level:3},{value:"\ud83c\udfaf Per-Call Overrides",id:"-per-call-overrides",level:2},{value:"Custom Headers",id:"custom-headers",level:3},{value:"Custom Axios Instance",id:"custom-axios-instance-1",level:3},{value:"Complete Override Example",id:"complete-override-example",level:3},{value:"\ud83d\udd10 Authentication Patterns",id:"-authentication-patterns",level:2},{value:"Token-Based Authentication",id:"token-based-authentication",level:3},{value:"Dynamic Token Updates",id:"dynamic-token-updates",level:3},{value:"Token Refresh Pattern",id:"token-refresh-pattern",level:3},{value:"\ud83c\udf0d Multi-Environment Setup",id:"-multi-environment-setup",level:2},{value:"Development/Production",id:"developmentproduction",level:3},{value:"Multiple API Endpoints",id:"multiple-api-endpoints",level:3},{value:"\ud83d\udcdd Complete Example",id:"-complete-example",level:2},{value:"\ud83d\udcda Further Reading",id:"-further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"client-configuration",children:"Client Configuration"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"RpcClient"})," accepts a configuration object that controls how requests are made. This guide covers all configuration options and patterns."]}),"\n",(0,r.jsx)(n.h2,{id:"-basic-configuration",children:"\ud83c\udfaf Basic Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { RpcClient } from '@nestjs-rpc/client';\nimport type { Manifest } from '../server/nest-rpc.config';\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc', // Optional, defaults to 'nestjs-rpc'\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Default"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"baseUrl"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{children:["Server origin, e.g. ",(0,r.jsx)(n.code,{children:"http://localhost:3000"})]}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"apiPrefix"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Controller mount path"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"'nestjs-rpc'"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requestOptions"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AxiosRequestConfig"})}),(0,r.jsx)(n.td,{children:"Merged into each request"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{}"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"axiosInstance"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"AxiosInstance"})}),(0,r.jsx)(n.td,{children:"Custom Axios instance"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"axios"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-advanced-configuration",children:"\u2699\ufe0f Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"custom-request-options",children:"Custom Request Options"}),"\n",(0,r.jsx)(n.p,{children:"Add default headers, timeouts, and other Axios options:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const client = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n  apiPrefix: 'nestjs-rpc',\n  requestOptions: {\n    timeout: 10000,\n    headers: {\n      'Authorization': 'Bearer token',\n      'X-Custom-Header': 'value',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"custom-axios-instance",children:"Custom Axios Instance"}),"\n",(0,r.jsx)(n.p,{children:"Use a custom Axios instance for more control:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import axios from 'axios';\n\nconst axiosInstance = axios.create({\n  timeout: 10000,\n  headers: {\n    'X-Custom-Header': 'value',\n  },\n});\n\n// Add interceptors\naxiosInstance.interceptors.request.use((config) => {\n  // Modify request\n  return config;\n});\n\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // Handle errors\n    return Promise.reject(error);\n  }\n);\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n  apiPrefix: 'nestjs-rpc',\n  axiosInstance, // Use custom instance\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"environment-based-configuration",children:"Environment-Based Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Use different configurations for different environments:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const client = new RpcClient<Manifest>({\n  baseUrl: import.meta.env.VITE_API_URL ?? 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc',\n  requestOptions: {\n    headers: {\n      'Authorization': `Bearer ${import.meta.env.VITE_API_TOKEN}`,\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-dynamic-configuration",children:"\ud83d\udd04 Dynamic Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Update configuration at runtime:"}),"\n",(0,r.jsx)(n.h3,{id:"update-single-property",children:"Update Single Property"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Update base URL\nclient.$setConfigProperty('baseUrl', 'https://api.production.com');\n\n// Update API prefix\nclient.$setConfigProperty('apiPrefix', 'api/v1');\n\n// Update request options\nclient.$setConfigProperty('requestOptions', {\n  headers: {\n    Authorization: `Bearer ${newToken}`,\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-entire-config",children:"Update Entire Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"client.$setConfig({\n  baseUrl: 'https://api.production.com',\n  apiPrefix: 'nestjs-rpc',\n  requestOptions: {\n    headers: {\n      Authorization: `Bearer ${newToken}`,\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"read-current-config",children:"Read Current Config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const config = client.$config;\nconsole.log(config.baseUrl); // 'http://localhost:3000'\nconsole.log(config.apiPrefix); // 'nestjs-rpc'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-per-call-overrides",children:"\ud83c\udfaf Per-Call Overrides"}),"\n",(0,r.jsx)(n.p,{children:"Override configuration for individual calls:"}),"\n",(0,r.jsx)(n.h3,{id:"custom-headers",children:"Custom Headers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Add custom headers for this call\nconst { data } = await rpc.user.getUserById('123', {\n  requestOptions: {\n    headers: {\n      Authorization: 'Bearer custom-token',\n      'X-Trace': 'abc123',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"custom-axios-instance-1",children:"Custom Axios Instance"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Use different Axios instance for this call\nconst { data } = await rpc.user.getUserById('123', {\n  axiosInstance: customAxiosInstance,\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"complete-override-example",children:"Complete Override Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { data } = await rpc.user.getUserById('123', {\n  requestOptions: {\n    headers: {\n      Authorization: 'Bearer token',\n      'X-Custom-Header': 'value',\n    },\n    timeout: 5000,\n  },\n  axiosInstance: customAxiosInstance,\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-authentication-patterns",children:"\ud83d\udd10 Authentication Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"token-based-authentication",children:"Token-Based Authentication"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"let authToken: string | null = null;\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n  requestOptions: {\n    headers: {\n      get Authorization() {\n        return authToken ? `Bearer ${authToken}` : undefined;\n      },\n    },\n  },\n});\n\n// Update token\nfunction setAuthToken(token: string) {\n  authToken = token;\n}\n\n// Clear token\nfunction clearAuthToken() {\n  authToken = null;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"dynamic-token-updates",children:"Dynamic Token Updates"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const client = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n});\n\n// Update token dynamically\nfunction updateAuthToken(token: string) {\n  client.$setConfigProperty('requestOptions', {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"token-refresh-pattern",children:"Token Refresh Pattern"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import axios, { AxiosError } from 'axios';\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n  axiosInstance: axios.create(),\n});\n\n// Add response interceptor for token refresh\nclient.$config.axiosInstance.interceptors.response.use(\n  (response) => response,\n  async (error: AxiosError) => {\n    if (error.response?.status === 401) {\n      // Refresh token\n      const newToken = await refreshToken();\n      \n      // Update client config\n      client.$setConfigProperty('requestOptions', {\n        headers: {\n          Authorization: `Bearer ${newToken}`,\n        },\n      });\n      \n      // Retry original request\n      if (error.config) {\n        return client.$config.axiosInstance.request(error.config);\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-multi-environment-setup",children:"\ud83c\udf0d Multi-Environment Setup"}),"\n",(0,r.jsx)(n.h3,{id:"developmentproduction",children:"Development/Production"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const isDevelopment = import.meta.env.DEV;\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: isDevelopment \n    ? 'http://localhost:3000'\n    : 'https://api.production.com',\n  apiPrefix: 'nestjs-rpc',\n  requestOptions: {\n    headers: {\n      'X-Environment': isDevelopment ? 'development' : 'production',\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-api-endpoints",children:"Multiple API Endpoints"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Main API\nexport const apiClient = new RpcClient<Manifest>({\n  baseUrl: 'https://api.example.com',\n  apiPrefix: 'nestjs-rpc',\n});\n\n// Admin API\nexport const adminClient = new RpcClient<AdminManifest>({\n  baseUrl: 'https://admin-api.example.com',\n  apiPrefix: 'nestjs-rpc',\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-complete-example",children:"\ud83d\udcdd Complete Example"}),"\n",(0,r.jsx)(n.p,{children:"Here's a complete example with all configuration patterns:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { RpcClient } from '@nestjs-rpc/client';\nimport axios from 'axios';\nimport type { Manifest } from '../server/nest-rpc.config';\n\n// Create custom Axios instance\nconst axiosInstance = axios.create({\n  timeout: 10000,\n});\n\n// Add request interceptor\naxiosInstance.interceptors.request.use((config) => {\n  const token = localStorage.getItem('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Add response interceptor\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    if (error.response?.status === 401) {\n      // Handle token refresh\n      const newToken = await refreshToken();\n      localStorage.setItem('authToken', newToken);\n      // Retry request\n      return axiosInstance.request(error.config);\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Create client\nexport const rpcClient = new RpcClient<Manifest>({\n  baseUrl: import.meta.env.VITE_API_URL ?? 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc',\n  axiosInstance,\n  requestOptions: {\n    headers: {\n      'X-Client-Version': '1.0.0',\n    },\n  },\n});\n\n// Export routers\nexport const rpc = rpcClient.routers();\n\n// Helper to update auth token\nexport function updateAuthToken(token: string) {\n  rpcClient.$setConfigProperty('requestOptions', {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-further-reading",children:"\ud83d\udcda Further Reading"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://axios-http.com/docs/req_config",children:"Axios Request Config"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://axios-http.com/docs/instance",children:"Axios Instance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://axios-http.com/docs/interceptors",children:"Axios Interceptors"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/client/error-handling",children:"Error Handling"})," - Error handling patterns"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);