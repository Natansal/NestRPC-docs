"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[731],{7224:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"server/routers-and-routes","title":"Routers and Routes","description":"Define routers with @Router and RPC endpoints with @Route","source":"@site/docs/server/routers-and-routes.md","sourceDirName":"server","slug":"/server/routers-and-routes","permalink":"/NestRPC-docs/docs/server/routers-and-routes","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs/blob/main/docs/server/routers-and-routes.md","tags":[],"version":"current","frontMatter":{"title":"Routers and Routes","description":"Define routers with @Router and RPC endpoints with @Route"},"sidebar":"tutorialSidebar","previous":{"title":"Server Overview","permalink":"/NestRPC-docs/docs/server/overview"},"next":{"title":"Execution Context","permalink":"/NestRPC-docs/docs/server/execution-context"}}');var n=s(4848),o=s(8453);const i={title:"Routers and Routes",description:"Define routers with @Router and RPC endpoints with @Route"},l=void 0,c={},u=[{value:"Define a router",id:"define-a-router",level:3},{value:"Register routers",id:"register-routers",level:3},{value:"Input param rule",id:"input-param-rule",level:3},{value:"Client pathing follows your keys",id:"client-pathing-follows-your-keys",level:3}];function a(e){const r={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h3,{id:"define-a-router",children:"Define a router"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { Router, Route } from '@nestjs-rpc/server';\n\n@Router()\nexport class UserQueriesRouter {\n  @Route()\n  getUser({ id }: { id: string }) { /* ... */ }\n\n  @Route()\n  listUsers() { /* ... */ }\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"register-routers",children:"Register routers"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { defineManifest } from '@nestjs-rpc/server';\nimport { UserQueriesRouter } from './user.queries.router';\n\nexport const manifest = defineManifest({\n  user: { queries: UserQueriesRouter },\n});\n\nexport type Manifest = typeof manifest;\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Also add your router classes to the module's ",(0,n.jsx)(r.code,{children:"controllers"})," array so Nest can instantiate them:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { Module } from '@nestjs/common';\nimport { UserQueriesRouter } from './user.queries.router';\n\n@Module({ controllers: [UserQueriesRouter] })\nexport class AppModule {}\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Call ",(0,n.jsx)(r.code,{children:"nestRpcInit(manifest)"})," BEFORE creating your Nest app. The runtime validates that:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["the final path segment is a router class decorated with ",(0,n.jsx)(r.code,{children:"@Router()"})]}),"\n",(0,n.jsxs)(r.li,{children:["the method exists and is decorated with ",(0,n.jsx)(r.code,{children:"@Route()"})]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"input-param-rule",children:"Input param rule"}),"\n",(0,n.jsx)(r.p,{children:"The first parameter is reserved for the input and is injected automatically."}),"\n",(0,n.jsx)(r.p,{children:"Further reading:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Nest Controllers: ",(0,n.jsx)(r.a,{href:"https://docs.nestjs.com/controllers",children:"https://docs.nestjs.com/controllers"})]}),"\n",(0,n.jsxs)(r.li,{children:["Nest Providers & DI: ",(0,n.jsx)(r.a,{href:"https://docs.nestjs.com/providers",children:"https://docs.nestjs.com/providers"})]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"client-pathing-follows-your-keys",children:"Client pathing follows your keys"}),"\n",(0,n.jsx)(r.p,{children:"The nested keys you choose define the access path on the client. For example:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"export const manifest = defineManifest({\n  app: AppRouter,\n  user: { queries: UserQueriesRouter },\n});\n"})}),"\n",(0,n.jsx)(r.p,{children:"Client calls:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"rpc.app.someMethod(123)\nrpc.user.queries.getUser({ id: '1' })\n"})})]})}function d(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>l});var t=s(6540);const n={},o=t.createContext(n);function i(e){const r=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);