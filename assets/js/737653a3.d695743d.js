"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[109],{7317:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"client/overview","title":"Client Overview","description":"Create a typed RPC client and call routes like local functions. Full type safety, file uploads, and framework-agnostic.","source":"@site/docs/client/overview.md","sourceDirName":"client","slug":"/client/overview","permalink":"/NestRPC-docs/docs/client/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs/blob/main/docs/client/overview.md","tags":[],"version":"current","frontMatter":{"title":"Client Overview","description":"Create a typed RPC client and call routes like local functions. Full type safety, file uploads, and framework-agnostic."},"sidebar":"tutorialSidebar","previous":{"title":"Server Error Handling","permalink":"/NestRPC-docs/docs/server/error-handling"},"next":{"title":"Client Configuration","permalink":"/NestRPC-docs/docs/client/configuration"}}');var t=r(4848),i=r(8453);const l={title:"Client Overview",description:"Create a typed RPC client and call routes like local functions. Full type safety, file uploads, and framework-agnostic."},o="Client Overview",a={},c=[{value:"\ud83c\udfaf Core Concepts",id:"-core-concepts",level:2},{value:"Type Safety",id:"type-safety",level:3},{value:"Response Format",id:"response-format",level:3},{value:"\ud83d\ude80 Basic Usage",id:"-basic-usage",level:2},{value:"Create Client",id:"create-client",level:3},{value:"Get Routers",id:"get-routers",level:3},{value:"Router Constants (Recommended)",id:"router-constants-recommended",level:3},{value:"\ud83d\udce4 File Uploads",id:"-file-uploads",level:2},{value:"\ud83c\udfa8 Framework Examples",id:"-framework-examples",level:2},{value:"React",id:"react",level:3},{value:"Vue 3",id:"vue-3",level:3},{value:"Angular",id:"angular",level:3},{value:"Vanilla TypeScript",id:"vanilla-typescript",level:3},{value:"\ud83d\udd27 Error Handling",id:"-error-handling",level:2},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83c\udfaf Best Practices",id:"-best-practices",level:2},{value:"\ud83d\udcda Next Steps",id:"-next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"client-overview",children:"Client Overview"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"@nestjs-rpc/client"})," package provides a type-safe client that mirrors your server router map using TypeScript inference. Call your server methods like local functions with full autocomplete and type checking."]}),"\n",(0,t.jsx)(n.h2,{id:"-core-concepts",children:"\ud83c\udfaf Core Concepts"}),"\n",(0,t.jsx)(n.h3,{id:"type-safety",children:"Type Safety"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u26a0\ufe0f IMPORTANT:"})," Always use ",(0,t.jsx)(n.code,{children:"import type"})," when importing the ",(0,t.jsx)(n.code,{children:"Manifest"})," type from the server. Do ",(0,t.jsx)(n.strong,{children:"NOT"})," import the manifest object itself, as this will cause the frontend to try to evaluate backend code and result in errors."]}),"\n",(0,t.jsx)(n.p,{children:"The client automatically infers types from your server's manifest:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { RpcClient } from '@nestjs-rpc/client';\nimport type { Manifest } from '../server/nest-rpc.config'; // \u2705 Use 'import type'\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc',\n});\n\nconst rpc = client.routers();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,t.jsxs)(n.p,{children:["Responses are Axios ",(0,t.jsx)(n.code,{children:"AxiosResponse"}),", so destructure ",(0,t.jsx)(n.code,{children:"data"})," from the result:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Server method signature:\n@Route()\nasync getUserById(id: string): Promise<User> {\n  return { id, name: 'John', email: 'john@example.com' };\n}\n\n// Client automatically gets:\nconst { data: user } = await rpc.user.getUserById('123');\n//    ^? { id: string; name: string; email: string }\n//    ^? id parameter is typed as string\n//    ^? Full autocomplete for User properties\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"If your server types change, your client code will show TypeScript errors immediately!"})}),"\n",(0,t.jsx)(n.h2,{id:"-basic-usage",children:"\ud83d\ude80 Basic Usage"}),"\n",(0,t.jsx)(n.h3,{id:"create-client",children:"Create Client"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u26a0\ufe0f IMPORTANT:"})," Always use ",(0,t.jsx)(n.code,{children:"import type"})," when importing the ",(0,t.jsx)(n.code,{children:"Manifest"})," type. Do ",(0,t.jsx)(n.strong,{children:"NOT"})," import the manifest object:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { RpcClient } from '@nestjs-rpc/client';\nimport type { Manifest } from '../server/nest-rpc.config'; // \u2705 Correct: 'import type'\n// \u274c Wrong: import { manifest } from '../server/nest-rpc.config'; // DON'T DO THIS\n\nconst client = new RpcClient<Manifest>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc', // Optional, defaults to 'nestjs-rpc'\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"get-routers",children:"Get Routers"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Get all routers\nconst rpc = client.routers();\n\n// Use with full type safety\nconst { data: user } = await rpc.user.queries.getUser({ id: '1' });\nconst { data: all } = await rpc.user.queries.listUsers();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"router-constants-recommended",children:"Router Constants (Recommended)"}),"\n",(0,t.jsx)(n.p,{children:"Create stable router constants for better organization:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"export const rpc = client.routers();\nexport const userRepo = rpc.user;\nexport const filesRepo = rpc.files;\n\n// Usage\nconst { data: user } = await userRepo.queries.getUser({ id: '1' });\nconst { data: files } = await filesRepo.listFiles();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-file-uploads",children:"\ud83d\udce4 File Uploads"}),"\n",(0,t.jsxs)(n.p,{children:["NestRPC client has built-in file upload support. See the ",(0,t.jsx)(n.a,{href:"/docs/client/file-uploads",children:"File Uploads"})," guide for details:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Single file upload\nconst fileInput = document.querySelector<HTMLInputElement>('input[type=\"file\"]');\n\nconst { data } = await rpc.files.uploadFile(\n  { description: 'My avatar' },\n  { file: fileInput.files[0] }\n);\n\n// Multiple file upload\nconst { data: result } = await rpc.files.uploadFiles(\n  { category: 'documents' },\n  { files: Array.from(fileInput.files || []) }\n);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-framework-examples",children:"\ud83c\udfa8 Framework Examples"}),"\n",(0,t.jsx)(n.h3,{id:"react",children:"React"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { useState, useEffect } from 'react';\nimport { rpc } from './rpc-client';\n\nfunction UserList() {\n  const [users, setUsers] = useState([]);\n\n  useEffect(() => {\n    rpc.user.queries.listUsers().then(({ data }) => setUsers(data));\n  }, []);\n\n  return (\n    <ul>\n      {users.map(user => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"vue-3",children:"Vue 3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vue",children:'<script setup lang="ts">\nimport { ref, onMounted } from \'vue\';\nimport { rpc } from \'./rpc-client\';\n\nconst users = ref([]);\n\nonMounted(async () => {\n  const { data } = await rpc.user.queries.listUsers();\n  users.value = data;\n});\n<\/script>\n\n<template>\n  <ul>\n    <li v-for="user in users" :key="user.id">{{ user.name }}</li>\n  </ul>\n</template>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"angular",children:"Angular"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Component, OnInit } from '@angular/core';\nimport { rpc } from './rpc-client';\n\n@Component({\n  selector: 'app-user-list',\n  template: `\n    <ul>\n      <li *ngFor=\"let user of users\">{{ user.name }}</li>\n    </ul>\n  `,\n})\nexport class UserListComponent implements OnInit {\n  users: any[] = [];\n\n  async ngOnInit() {\n    const { data } = await rpc.user.queries.listUsers();\n    this.users = data;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"vanilla-typescript",children:"Vanilla TypeScript"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { rpc } from './rpc-client';\n\nasync function loadUsers() {\n  const { data: users } = await rpc.user.queries.listUsers();\n  console.log('Users:', users);\n}\n\nloadUsers();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-error-handling",children:"\ud83d\udd27 Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"Errors surface through the HTTP client (Axios) as usual. Handle with try/catch or interceptors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"try {\n  const { data: user } = await rpc.user.queries.getUser({ id: 'missing' });\n} catch (error) {\n  if (error instanceof AxiosError) {\n    console.error('Status:', error.response?.status);\n    console.error('Data:', error.response?.data);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/docs/client/error-handling",children:"Error Handling"})," for more details."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The client supports extensive configuration options. See ",(0,t.jsx)(n.a,{href:"/docs/client/configuration",children:"Configuration"})," for details:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const client = new RpcClient<Manifest>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'nestjs-rpc',\n  requestOptions: {\n    headers: {\n      Authorization: 'Bearer token',\n    },\n  },\n  axiosInstance: customAxiosInstance, // Optional custom Axios instance\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-best-practices",children:"\ud83c\udfaf Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Import type only"})," - Always use ",(0,t.jsx)(n.code,{children:"import type { Manifest }"})," from the server. Never import the manifest object itself, as it will cause the frontend to try to evaluate backend code."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export manifest type"})," - Make sure your server exports ",(0,t.jsx)(n.code,{children:"export type Manifest = typeof manifest"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Centralize client"})," - Create one client instance and export it"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use environment variables"})," - Use different base URLs for dev/prod"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Handle errors"})," - Wrap calls in try-catch or use error boundaries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type your responses"})," - Use ",(0,t.jsx)(n.code,{children:"const { data }"})," destructuring for better types"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\udcda Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Learn about ",(0,t.jsx)(n.a,{href:"/docs/client/file-uploads",children:"file uploads"})," in detail"]}),"\n",(0,t.jsxs)(n.li,{children:["Explore ",(0,t.jsx)(n.a,{href:"/docs/client/configuration",children:"configuration options"})]}),"\n",(0,t.jsxs)(n.li,{children:["Understand ",(0,t.jsx)(n.a,{href:"/docs/client/error-handling",children:"error handling"})," patterns"]}),"\n",(0,t.jsxs)(n.li,{children:["Check out ",(0,t.jsx)(n.a,{href:"/docs/best-practices",children:"best practices"})," for organizing your code"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);