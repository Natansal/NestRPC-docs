"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[40],{5679:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"client/file-uploads","title":"File Uploads","description":"Upload files from the client with full type safety. Single and multiple file support.","source":"@site/docs/client/file-uploads.md","sourceDirName":"client","slug":"/client/file-uploads","permalink":"/NestRPC-docs/docs/client/file-uploads","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs/blob/main/docs/client/file-uploads.md","tags":[],"version":"current","frontMatter":{"title":"File Uploads","description":"Upload files from the client with full type safety. Single and multiple file support."},"sidebar":"tutorialSidebar","previous":{"title":"Client Configuration","permalink":"/NestRPC-docs/docs/client/configuration"},"next":{"title":"Error Handling","permalink":"/NestRPC-docs/docs/client/error-handling"}}');var t=l(4848),a=l(8453);const r={title:"File Uploads",description:"Upload files from the client with full type safety. Single and multiple file support."},s="\ud83d\udce4 Client File Uploads",o={},d=[{value:"\ud83c\udfaf Single File Upload",id:"-single-file-upload",level:2},{value:"React Example",id:"react-example",level:3},{value:"\ud83d\udcda Multiple File Upload",id:"-multiple-file-upload",level:2},{value:"React Example",id:"react-example-1",level:3},{value:"\ud83c\udfa8 Vue 3 Example",id:"-vue-3-example",level:2},{value:"\ud83d\udd27 Advanced Usage",id:"-advanced-usage",level:2},{value:"With Progress Tracking",id:"with-progress-tracking",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"File Validation Before Upload",id:"file-validation-before-upload",level:3},{value:"\ud83c\udfaf Best Practices",id:"-best-practices",level:2},{value:"\ud83d\udcda Related Documentation",id:"-related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-client-file-uploads",children:"\ud83d\udce4 Client File Uploads"})}),"\n",(0,t.jsxs)(n.p,{children:["NestRPC client has ",(0,t.jsx)(n.strong,{children:"built-in support"})," for file uploads. No FormData handling needed! Just pass files in the second parameter."]}),"\n",(0,t.jsx)(n.h2,{id:"-single-file-upload",children:"\ud83c\udfaf Single File Upload"}),"\n",(0,t.jsxs)(n.p,{children:["Upload a single file by passing ",(0,t.jsx)(n.code,{children:"{ file: File }"})," as the second parameter:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { rpc } from './rpc-client';\n\n// Get file from input\nconst fileInput = document.querySelector<HTMLInputElement>('input[type=\"file\"]');\n\n// Upload single file\nconst { data } = await rpc.files.uploadFile(\n  { description: 'My avatar' },\n  { file: fileInput.files[0] }\n);\n\nconsole.log(data); // { success: true, filename: '...', size: ... }\n"})}),"\n",(0,t.jsx)(n.h3,{id:"react-example",children:"React Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { useState } from 'react';\nimport { rpc } from './rpc-client';\n\nfunction FileUpload() {\n  const [file, setFile] = useState<File | null>(null);\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n\n  const handleUpload = async () => {\n    if (!file) return;\n    \n    setUploading(true);\n    try {\n      const { data } = await rpc.files.uploadFile(\n        { description: description || undefined },\n        { file }\n      );\n      \n      console.log('Uploaded:', data);\n      alert('File uploaded successfully!');\n    } catch (error) {\n      console.error('Upload failed:', error);\n      alert('Upload failed');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div>\n      <input \n        type=\"file\" \n        onChange={(e) => setFile(e.target.files?.[0] || null)} \n      />\n      <input\n        type=\"text\"\n        placeholder=\"Description (optional)\"\n        value={description}\n        onChange={(e) => setDescription(e.target.value)}\n      />\n      <button onClick={handleUpload} disabled={!file || uploading}>\n        {uploading ? 'Uploading...' : 'Upload'}\n      </button>\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-multiple-file-upload",children:"\ud83d\udcda Multiple File Upload"}),"\n",(0,t.jsxs)(n.p,{children:["Upload multiple files by passing ",(0,t.jsx)(n.code,{children:"{ files: File[] }"})," as the second parameter:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const fileInput = document.querySelector<HTMLInputElement>('input[type=\"file\"]');\n\n// Upload multiple files\nconst { data } = await rpc.files.uploadFiles(\n  { category: 'documents' },\n  { files: Array.from(fileInput.files || []) }\n);\n\nconsole.log(data); // { success: true, files: [...], count: 3 }\n"})}),"\n",(0,t.jsx)(n.h3,{id:"react-example-1",children:"React Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { useState } from 'react';\nimport { rpc } from './rpc-client';\n\nfunction MultipleFileUpload() {\n  const [files, setFiles] = useState<File[]>([]);\n  const [category, setCategory] = useState('');\n  const [uploading, setUploading] = useState(false);\n\n  const handleUpload = async () => {\n    if (files.length === 0) return;\n    \n    setUploading(true);\n    try {\n      const { data } = await rpc.files.uploadFiles(\n        { category: category || undefined },\n        { files }\n      );\n      \n      console.log('Uploaded:', data);\n      alert(`Successfully uploaded ${data.count} file(s)!`);\n      setFiles([]);\n      setCategory('');\n    } catch (error) {\n      console.error('Upload failed:', error);\n      alert('Upload failed');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div>\n      <input \n        type=\"file\" \n        multiple\n        onChange={(e) => setFiles(Array.from(e.target.files || []))} \n      />\n      <input\n        type=\"text\"\n        placeholder=\"Category (optional)\"\n        value={category}\n        onChange={(e) => setCategory(e.target.value)}\n      />\n      <button onClick={handleUpload} disabled={files.length === 0 || uploading}>\n        {uploading ? 'Uploading...' : `Upload ${files.length} File(s)`}\n      </button>\n    </div>\n  );\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-vue-3-example",children:"\ud83c\udfa8 Vue 3 Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vue",children:"<template>\n  <div>\n    <input \n      type=\"file\" \n      @change=\"handleFileChange\"\n      :multiple=\"multiple\"\n    />\n    <input\n      v-if=\"!multiple\"\n      v-model=\"description\"\n      placeholder=\"Description (optional)\"\n    />\n    <input\n      v-if=\"multiple\"\n      v-model=\"category\"\n      placeholder=\"Category (optional)\"\n    />\n    <button @click=\"handleUpload\" :disabled=\"!canUpload || uploading\">\n      {{ uploading ? 'Uploading...' : uploadButtonText }}\n    </button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue';\nimport { rpc } from './rpc-client';\n\nconst props = defineProps<{ multiple?: boolean }>();\n\nconst file = ref<File | null>(null);\nconst files = ref<File[]>([]);\nconst description = ref('');\nconst category = ref('');\nconst uploading = ref(false);\n\nconst handleFileChange = (e: Event) => {\n  const target = e.target as HTMLInputElement;\n  if (props.multiple) {\n    files.value = Array.from(target.files || []);\n  } else {\n    file.value = target.files?.[0] || null;\n  }\n};\n\nconst canUpload = computed(() => {\n  return props.multiple ? files.value.length > 0 : file.value !== null;\n});\n\nconst uploadButtonText = computed(() => {\n  if (props.multiple) {\n    return `Upload ${files.value.length} File(s)`;\n  }\n  return 'Upload';\n});\n\nconst handleUpload = async () => {\n  if (props.multiple) {\n    if (files.value.length === 0) return;\n    uploading.value = true;\n    try {\n      const { data } = await rpc.files.uploadFiles(\n        { category: category.value || undefined },\n        { files: files.value }\n      );\n      console.log('Uploaded:', data);\n      files.value = [];\n      category.value = '';\n    } catch (error) {\n      console.error('Upload failed:', error);\n    } finally {\n      uploading.value = false;\n    }\n  } else {\n    if (!file.value) return;\n    uploading.value = true;\n    try {\n      const { data } = await rpc.files.uploadFile(\n        { description: description.value || undefined },\n        { file: file.value }\n      );\n      console.log('Uploaded:', data);\n      file.value = null;\n      description.value = '';\n    } catch (error) {\n      console.error('Upload failed:', error);\n    } finally {\n      uploading.value = false;\n    }\n  }\n};\n<\/script>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-advanced-usage",children:"\ud83d\udd27 Advanced Usage"}),"\n",(0,t.jsx)(n.h3,{id:"with-progress-tracking",children:"With Progress Tracking"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { rpc } from './rpc-client';\n\nasync function uploadWithProgress(file: File, onProgress: (progress: number) => void) {\n  // Note: Axios progress tracking would need to be configured\n  // This is a conceptual example\n  const { data } = await rpc.files.uploadFile(\n    { description: 'Upload with progress' },\n    { file }\n  );\n  return data;\n}\n\n// Usage\nconst fileInput = document.querySelector<HTMLInputElement>('input[type=\"file\"]');\nawait uploadWithProgress(fileInput.files[0], (progress) => {\n  console.log(`Upload progress: ${progress}%`);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { rpc } from './rpc-client';\nimport { AxiosError } from 'axios';\n\nasync function uploadFileSafely(file: File) {\n  try {\n    const { data } = await rpc.files.uploadFile(\n      { description: 'Safe upload' },\n      { file }\n    );\n    return { success: true, data };\n  } catch (error) {\n    if (error instanceof AxiosError) {\n      if (error.response?.status === 413) {\n        return { success: false, error: 'File too large' };\n      }\n      if (error.response?.status === 400) {\n        return { success: false, error: error.response.data.message || 'Invalid file' };\n      }\n    }\n    return { success: false, error: 'Upload failed' };\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"file-validation-before-upload",children:"File Validation Before Upload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function validateFile(file: File): { valid: boolean; error?: string } {\n  // Check file size (5MB limit)\n  const maxSize = 5 * 1024 * 1024;\n  if (file.size > maxSize) {\n    return { valid: false, error: 'File size exceeds 5MB limit' };\n  }\n\n  // Check file type\n  const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];\n  if (!allowedTypes.includes(file.type)) {\n    return { valid: false, error: 'Invalid file type. Only JPEG, PNG, and GIF are allowed' };\n  }\n\n  return { valid: true };\n}\n\nasync function uploadValidatedFile(file: File) {\n  const validation = validateFile(file);\n  if (!validation.valid) {\n    throw new Error(validation.error);\n  }\n\n  const { data } = await rpc.files.uploadFile(\n    { description: 'Validated file' },\n    { file }\n  );\n  return data;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-best-practices",children:"\ud83c\udfaf Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validate files client-side"})," - Check size and type before uploading"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Show upload progress"})," - Provide user feedback during uploads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Handle errors gracefully"})," - Display meaningful error messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Disable upload button"})," - Prevent multiple simultaneous uploads"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clear form after success"})," - Reset file inputs after successful upload"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-related-documentation",children:"\ud83d\udcda Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/server/file-uploads",children:"Server File Uploads"})," - Server-side file handling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/client/configuration",children:"Client Configuration"})," - Client configuration options"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/client/error-handling",children:"Error Handling"})," - Error handling patterns"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>s});var i=l(6540);const t={},a=i.createContext(t);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);