"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[782],{8453:(e,r,s)=>{s.d(r,{R:()=>l,x:()=>o});var n=s(6540);const t={},i=n.createContext(t);function l(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(i.Provider,{value:r},e.children)}},9123:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"server/overview","title":"Server Overview","description":"Core concepts and features of @nestjs-rpc/server","source":"@site/docs/server/overview.md","sourceDirName":"server","slug":"/server/overview","permalink":"/NestRPC-docs/docs/server/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs/blob/main/docs/server/overview.md","tags":[],"version":"current","frontMatter":{"title":"Server Overview","description":"Core concepts and features of @nestjs-rpc/server"},"sidebar":"tutorialSidebar","previous":{"title":"Best Practices","permalink":"/NestRPC-docs/docs/best-practices"},"next":{"title":"Routers and Routes","permalink":"/NestRPC-docs/docs/server/routers-and-routes"}}');var t=s(4848),i=s(8453);const l={title:"Server Overview",description:"Core concepts and features of @nestjs-rpc/server"},o="Server Overview",c={},d=[{value:"\ud83c\udfaf Core Concepts",id:"-core-concepts",level:2},{value:"Decorators",id:"decorators",level:3},{value:"Manifest",id:"manifest",level:3},{value:"Initialization",id:"initialization",level:3},{value:"\u2728 Key Features",id:"-key-features",level:2},{value:"\ud83c\udfaf Zero Boilerplate",id:"-zero-boilerplate",level:3},{value:"\ud83d\udd12 Type Safety",id:"-type-safety",level:3},{value:"\ud83d\udce4 Built-in File Uploads",id:"-built-in-file-uploads",level:3},{value:"\ud83e\udde9 NestJS Native",id:"-nestjs-native",level:3},{value:"\ud83d\udcdd Important Notes",id:"-important-notes",level:2},{value:"\ud83d\ude80 What&#39;s Next?",id:"-whats-next",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"server-overview",children:"Server Overview"})}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"@nestjs-rpc/server"})," package provides the NestJS integration and runtime for defining and executing RPC routes. It gives you type-safe, zero-boilerplate RPC endpoints with built-in file upload support."]}),"\n",(0,t.jsx)(r.h2,{id:"-core-concepts",children:"\ud83c\udfaf Core Concepts"}),"\n",(0,t.jsx)(r.h3,{id:"decorators",children:"Decorators"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"@Router()"})})," - Marks a class as an RPC router (applies ",(0,t.jsx)(r.code,{children:"@Controller()"})," under the hood, making it a NestJS controller)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"@Route(config?)"})})," - Marks a method as an RPC endpoint with optional file upload configuration"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Important:"})," Since routers are NestJS controllers under the hood:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["They accept all NestJS controller parameter decorators (",(0,t.jsx)(r.code,{children:"@Req()"}),", ",(0,t.jsx)(r.code,{children:"@Res()"}),", ",(0,t.jsx)(r.code,{children:"@Headers()"}),", ",(0,t.jsx)(r.code,{children:"@Body()"}),", etc.)"]}),"\n",(0,t.jsxs)(r.li,{children:["Routes can have guard and pipe decorators (",(0,t.jsx)(r.code,{children:"@UseGuards()"}),", ",(0,t.jsx)(r.code,{children:"@UsePipes()"}),", ",(0,t.jsx)(r.code,{children:"@UseInterceptors()"}),", etc.) just like native NestJS controllers"]}),"\n",(0,t.jsx)(r.li,{children:"They work with dependency injection, interceptors, and all NestJS features"}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"manifest",children:"Manifest"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"defineManifest({...})"})})," - Creates a manifest from your router structure, preserving type information"]}),"\n",(0,t.jsx)(r.li,{children:"Maps keys to routers or nested maps, defining the API structure"}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"initialization",children:"Initialization"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"nestRpcInit(manifest, { apiPrefix })"})})," - ",(0,t.jsxs)(r.strong,{children:["MUST be called BEFORE ",(0,t.jsx)(r.code,{children:"NestFactory.create(...)"})]})]}),"\n",(0,t.jsx)(r.li,{children:"Applies Nest decorators so routes can be discovered at bootstrap"}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"-key-features",children:"\u2728 Key Features"}),"\n",(0,t.jsx)(r.h3,{id:"-zero-boilerplate",children:"\ud83c\udfaf Zero Boilerplate"}),"\n",(0,t.jsx)(r.p,{children:"No controllers, DTOs, or manual route definitions needed. Just define your methods:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Router()\nexport class UserRouter {\n  @Route()\n  async getUserById(id: string) {\n    return getUserFromDb(id);\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"-type-safety",children:"\ud83d\udd12 Type Safety"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Parameter Rules:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.strong,{children:"first parameter (index 0)"})," is ",(0,t.jsx)(r.strong,{children:"reserved for the incoming request body"}),". Its TypeScript type flows to the client automatically. ",(0,t.jsx)(r.strong,{children:"Do not decorate it."})]}),"\n",(0,t.jsxs)(r.li,{children:["If the route has file upload configuration (",(0,t.jsx)(r.code,{children:"file: 'single'"})," or ",(0,t.jsx)(r.code,{children:"file: 'multiple'"}),"), the ",(0,t.jsx)(r.strong,{children:"second parameter (index 1)"})," is ",(0,t.jsx)(r.strong,{children:"reserved for the file/files"})," (",(0,t.jsx)(r.code,{children:"Express.Multer.File"})," or ",(0,t.jsx)(r.code,{children:"Express.Multer.File[]"}),")."]}),"\n",(0,t.jsxs)(r.li,{children:["Subsequent parameters can use NestJS parameter decorators (",(0,t.jsx)(r.code,{children:"@Req()"}),", ",(0,t.jsx)(r.code,{children:"@Res()"}),", ",(0,t.jsx)(r.code,{children:"@Headers()"}),", etc.)"]}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Route()\nasync createUser({ name, email }: { name: string; email: string }) {\n  // name and email are typed on both server and client!\n  return createUserInDb({ name, email });\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"-built-in-file-uploads",children:"\ud83d\udce4 Built-in File Uploads"}),"\n",(0,t.jsx)(r.p,{children:"Single and multiple file uploads with one decorator:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Route({ file: 'single' })\nasync uploadAvatar(\n  { userId }: { userId: string },\n  file?: Express.Multer.File\n) {\n  // Handle file upload\n}\n\n@Route({ file: 'multiple' })\nasync uploadDocuments(\n  { category }: { category?: string },\n  files?: Express.Multer.File[]\n) {\n  // Handle multiple files\n}\n"})}),"\n",(0,t.jsx)(r.h3,{id:"-nestjs-native",children:"\ud83e\udde9 NestJS Native"}),"\n",(0,t.jsx)(r.p,{children:"Routers are NestJS controllers, so you can:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Use dependency injection"}),"\n",(0,t.jsx)(r.li,{children:"Apply guards, interceptors, and pipes"}),"\n",(0,t.jsx)(r.li,{children:"Access request/response objects"}),"\n",(0,t.jsx)(r.li,{children:"Use custom parameter decorators"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Router()\nexport class UserRouter {\n  constructor(\n    private readonly userService: UserService,\n    private readonly db: DatabaseService,\n  ) {}\n\n  @Route()\n  async getUserById(id: string) {\n    return this.userService.findById(id);\n  }\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"-important-notes",children:"\ud83d\udcdd Important Notes"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Parameter Rules"}),":"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.strong,{children:"first parameter (index 0)"})," is ",(0,t.jsx)(r.strong,{children:"reserved for the incoming request body"}),". Its type flows to the client. Do not decorate it."]}),"\n",(0,t.jsxs)(r.li,{children:["If the route has file upload configuration, the ",(0,t.jsx)(r.strong,{children:"second parameter (index 1)"})," is ",(0,t.jsx)(r.strong,{children:"reserved for the file/files"}),"."]}),"\n",(0,t.jsx)(r.li,{children:"Subsequent parameters can use NestJS parameter decorators."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Routers are Controllers"}),": Routers are NestJS controllers under the hood. They accept all controller parameter decorators, and routes can have guard and pipe decorators just like native NestJS controllers."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Module Registration"}),": ",(0,t.jsx)(r.strong,{children:"\u26a0\ufe0f CRITICAL"})," - Router classes ",(0,t.jsx)(r.strong,{children:"MUST"})," be added to your module's ",(0,t.jsx)(r.code,{children:"controllers"})," array for them to work:"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:"@Module({\n  controllers: [UserRouter], // \u2705 REQUIRED - Routers must be in controllers array\n})\nexport class AppModule {}\n"})}),"\n",(0,t.jsxs)(r.ol,{start:"4",children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Initialization Order"}),": ",(0,t.jsx)(r.code,{children:"nestRpcInit()"})," ",(0,t.jsx)(r.strong,{children:"MUST"})," be called ",(0,t.jsx)(r.strong,{children:"BEFORE"})," ",(0,t.jsx)(r.code,{children:"NestFactory.create()"}),". This is critical for decorator discovery."]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"API Prefix"}),": The ",(0,t.jsx)(r.code,{children:"apiPrefix"})," defaults to ",(0,t.jsx)(r.code,{children:"'nestjs-rpc'"})," when not provided. All routes will be prefixed with this path."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"-whats-next",children:"\ud83d\ude80 What's Next?"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Learn about ",(0,t.jsx)(r.a,{href:"/docs/server/routers-and-routes",children:"routers and routes"})," in detail"]}),"\n",(0,t.jsxs)(r.li,{children:["Explore ",(0,t.jsx)(r.a,{href:"/docs/server/file-uploads",children:"file uploads"})," capabilities"]}),"\n",(0,t.jsxs)(r.li,{children:["See ",(0,t.jsx)(r.a,{href:"/docs/server/nest-integration",children:"NestJS integration"})," patterns"]}),"\n",(0,t.jsxs)(r.li,{children:["Understand ",(0,t.jsx)(r.a,{href:"/docs/server/error-handling",children:"error handling"})]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);