"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[814],{1953:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"quick-start","title":"Quick Start","description":"Install, configure, and call your first RPC with NestJS RPC","source":"@site/docs/quick-start.md","sourceDirName":".","slug":"/quick-start","permalink":"/NestRPC-docs/docs/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs.git/docs/quick-start.md","tags":[],"version":"current","frontMatter":{"title":"Quick Start","description":"Install, configure, and call your first RPC with NestJS RPC","slug":"/quick-start"},"sidebar":"tutorialSidebar","next":{"title":"Server Overview","permalink":"/NestRPC-docs/docs/server/overview"}}');var s=r(4848),i=r(8453);const l={title:"Quick Start",description:"Install, configure, and call your first RPC with NestJS RPC",slug:"/quick-start"},c=void 0,o={},a=[{value:"Install",id:"install",level:3},{value:"1) Define routers and routes (server)",id:"1-define-routers-and-routes-server",level:3},{value:"2) Declare the app router map (server)",id:"2-declare-the-app-router-map-server",level:3},{value:"3) Mount the RPC controller (server)",id:"3-mount-the-rpc-controller-server",level:3},{value:"4) Create a typed client (client)",id:"4-create-a-typed-client-client",level:3},{value:"5) Call methods like local functions (client)",id:"5-call-methods-like-local-functions-client",level:3},{value:"About batching (client-side)",id:"about-batching-client-side",level:3},{value:"Example repo",id:"example-repo",level:3}];function d(e){const t={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h3,{id:"install",children:"Install"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Server (NestJS app)\nnpm install @nestjs-rpc/server\n\n# Client (web/app)\nnpm install @nestjs-rpc/client\n"})}),"\n",(0,s.jsx)(t.h3,{id:"1-define-routers-and-routes-server",children:"1) Define routers and routes (server)"}),"\n",(0,s.jsxs)(t.p,{children:["Create a router with ",(0,s.jsx)(t.code,{children:"@Router()"})," and expose methods with ",(0,s.jsx)(t.code,{children:"@Route()"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// user.queries.router.ts\nimport { Router, Route } from '@nestjs-rpc/server';\n\n@Router()\nexport class UserQueriesRouter {\n  @Route()\n  getUser({ id }: { id: string }) {\n    return { id, name: 'Ada' };\n  }\n\n  @Route()\n  listUsers() {\n    return [{ id: '1', name: 'Ada' }];\n  }\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Important: The first parameter in each route method is reserved for the incoming input. Its TypeScript type flows to the client automatically. Do not decorate the first parameter with custom decorators\u2014it\u2019s used for the raw input and enforced at runtime."}),"\n",(0,s.jsx)(t.h3,{id:"2-declare-the-app-router-map-server",children:"2) Declare the app router map (server)"}),"\n",(0,s.jsxs)(t.p,{children:["Use ",(0,s.jsx)(t.code,{children:"defineAppRouter()"})," to map keys to routers or nested maps. Export a type for the client."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// nest-rpc.config.ts\nimport { defineAppRouter, type InferNestRpcRouterApp } from '@nestjs-rpc/server';\nimport { UserQueriesRouter } from './user.queries.router';\n\nexport const appRouter = defineAppRouter({\n  user: { queries: UserQueriesRouter },\n});\n\nexport type RpcApp = InferNestRpcRouterApp<typeof appRouter>;\n\nNote: The nested keys you define here are the exact paths the client will use. For the example above, method access becomes: `rpc.user.queries.getUser(...)`.\n"})}),"\n",(0,s.jsx)(t.h3,{id:"3-mount-the-rpc-controller-server",children:"3) Mount the RPC controller (server)"}),"\n",(0,s.jsxs)(t.p,{children:["Register the module and pass the router map. Optionally customize ",(0,s.jsx)(t.code,{children:"apiPrefix"})," and ",(0,s.jsx)(t.code,{children:"logger"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// app.module.ts\nimport { Module } from '@nestjs/common';\nimport { NestRPCModule } from '@nestjs-rpc/server';\nimport { appRouter } from './nest-rpc.config';\n\n@Module({\n  imports: [\n    NestRPCModule.forRoot({\n      routes: appRouter,\n      apiPrefix: 'api',\n    }),\n  ],\n})\nexport class AppModule {}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"4-create-a-typed-client-client",children:"4) Create a typed client (client)"}),"\n",(0,s.jsx)(t.p,{children:"Import the server type and build the client. Batching is enabled by default."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"// rpc.ts (client)\nimport { createRpcClient } from '@nestjs-rpc/client';\nimport type { RpcApp } from '../server/nest-rpc.config';\n\nexport const rpc = createRpcClient<RpcApp>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'api',\n});\n"})}),"\n",(0,s.jsx)(t.h3,{id:"5-call-methods-like-local-functions-client",children:"5) Call methods like local functions (client)"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const user = await rpc.user.queries.getUser({ id: '1' });\nconst all = await rpc.user.queries.listUsers();\n"})}),"\n",(0,s.jsx)(t.h3,{id:"about-batching-client-side",children:"About batching (client-side)"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Enabled by default with sane defaults: ",(0,s.jsx)(t.code,{children:"{ enabled: true, maxBatchSize: 20, debounceMs: 50, maxUrlSize: 2048 }"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Multiple calls within the debounce window coalesce into a single POST with encoded ",(0,s.jsx)(t.code,{children:"calls"})," query and parallel body."]}),"\n",(0,s.jsxs)(t.li,{children:["Configure via ",(0,s.jsx)(t.code,{children:"batch"}),":"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"createRpcClient<RpcApp>({\n  baseUrl: 'http://localhost:3000',\n  apiPrefix: 'api',\n  batch: { enabled: true, maxBatchSize: 10, debounceMs: 25, maxUrlSize: 4096 },\n});\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Tip: If you disable batching (",(0,s.jsx)(t.code,{children:"batch: false"}),"), each call posts immediately."]}),"\n",(0,s.jsx)(t.h3,{id:"example-repo",children:"Example repo"}),"\n",(0,s.jsxs)(t.p,{children:["See a full working example in the monorepo under ",(0,s.jsx)(t.code,{children:"NestRPC/example"})," (server and client). The docs here mirror that usage style."]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>l,x:()=>c});var n=r(6540);const s={},i=n.createContext(s);function l(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);