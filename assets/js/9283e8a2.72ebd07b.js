"use strict";(self.webpackChunknestjs_rpc_docs=self.webpackChunknestjs_rpc_docs||[]).push([[731],{7224:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>u,default:()=>l,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"server/routers-and-routes","title":"Routers and Routes","description":"Define routers with @Router and RPC endpoints with @Route","source":"@site/docs/server/routers-and-routes.md","sourceDirName":"server","slug":"/server/routers-and-routes","permalink":"/NestRPC-docs/docs/server/routers-and-routes","draft":false,"unlisted":false,"editUrl":"https://github.com/Natansal/NestRPC-docs.git/docs/server/routers-and-routes.md","tags":[],"version":"current","frontMatter":{"title":"Routers and Routes","description":"Define routers with @Router and RPC endpoints with @Route"},"sidebar":"tutorialSidebar","previous":{"title":"Server Overview","permalink":"/NestRPC-docs/docs/server/overview"},"next":{"title":"Custom Param Decorators","permalink":"/NestRPC-docs/docs/server/custom-params"}}');var n=t(4848),o=t(8453);const i={title:"Routers and Routes",description:"Define routers with @Router and RPC endpoints with @Route"},u=void 0,a={},c=[{value:"Define a router",id:"define-a-router",level:3},{value:"Register routers",id:"register-routers",level:3},{value:"Input param rule",id:"input-param-rule",level:3},{value:"Client pathing follows your keys",id:"client-pathing-follows-your-keys",level:3}];function d(e){const r={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h3,{id:"define-a-router",children:"Define a router"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { Router, Route } from '@nestjs-rpc/server';\n\n@Router()\nexport class UserQueriesRouter {\n  @Route()\n  getUser({ id }: { id: string }) { /* ... */ }\n\n  @Route()\n  listUsers() { /* ... */ }\n}\n"})}),"\n",(0,n.jsx)(r.h3,{id:"register-routers",children:"Register routers"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"import { defineAppRouter } from '@nestjs-rpc/server';\nimport { UserQueriesRouter } from './user.queries.router';\n\nexport const routes = defineAppRouter({\n  user: { queries: UserQueriesRouter },\n});\n"})}),"\n",(0,n.jsxs)(r.p,{children:["Use the map in ",(0,n.jsx)(r.code,{children:"NestRPCModule.forRoot({ routes })"}),". The dynamic controller validates that:"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["the final path segment is a router class decorated with ",(0,n.jsx)(r.code,{children:"@Router()"})]}),"\n",(0,n.jsxs)(r.li,{children:["the method exists and is decorated with ",(0,n.jsx)(r.code,{children:"@Route()"})]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"input-param-rule",children:"Input param rule"}),"\n",(0,n.jsx)(r.p,{children:"The first parameter is reserved for the input and is injected automatically. Do not decorate it; decorating index 0 throws at runtime."}),"\n",(0,n.jsx)(r.h3,{id:"client-pathing-follows-your-keys",children:"Client pathing follows your keys"}),"\n",(0,n.jsx)(r.p,{children:"The nested keys you choose define the access path on the client. For example:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"export const routes = defineAppRouter({\n  app: AppRouter,\n  user: { queries: UserQueriesRouter },\n});\n"})}),"\n",(0,n.jsx)(r.p,{children:"Client calls:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"rpc.app.batch1(123)\nrpc.user.queries.getUser({ id: '1' })\n"})})]})}function l(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>u});var s=t(6540);const n={},o=s.createContext(n);function i(e){const r=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function u(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);